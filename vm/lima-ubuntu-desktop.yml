# Lima configuration for Ubuntu Desktop VM
# https://github.com/lima-vm/lima

---
# VM details
cpus: 2
memory: "4GiB"
disk: "15GiB"

# Ubuntu image
images:
  # yamllint disable-line rule:line-length
  - location: "https://cloud-images.ubuntu.com/noble/current/noble-server-cloudimg-amd64.img"
    arch: "x86_64"

# SSH configuration (let Lima handle automatically)
ssh:
  loadDotSSHPubKeys: true

# Basic provisioning (minimal setup)
provision:
  - mode: system
    script: |
      #!/bin/bash
      set -eux -o pipefail

      # Update package list
      apt-get update

      # Install basic packages needed for the install script
      DEBIAN_FRONTEND=noninteractive apt-get install -y \
        curl \
        wget \
        sudo \
        systemd

      # Ensure SSH is properly configured
      systemctl enable ssh
      systemctl start ssh

      echo "âœ… Basic Ubuntu VM setup complete"

# Enable systemd
systemd: true
